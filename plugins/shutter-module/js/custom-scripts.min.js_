function getStyleTitle(){var e="";return $("input[name=property_style]:checked").length>0&&(e=$("input[name=property_style]:checked").data("title")),e}function getPropertyMidrailheight(){var e=[];return $("#property_midrailheight").val().length>0&&(e[0]=parseFloat($("#property_midrailheight").val())),e}function getPropertyTotHeight(){var e=0;return""!=$("#property_totheight").val()&&(e=parseInt($("#property_totheight").val())),e}function getPropertyStile(){return $("#property_stile").select2("data")?parseFloat($("#property_stile").select2("data").value):0}function getPropertyBladesize(){return $("#property_bladesize").select2("data")?parseFloat($("#property_bladesize").select2("data").value):0}jQuery("span.js-next-step.next-step, .panel-heading").click(function(){console.log("js-next-step click!"),jQuery(this).hasClass("js-next-step")&&(console.log(jQuery(this).parent().parent().parent().parent()),jQuery(this).parent().parent().parent().parent().addClass("done"),jQuery(this).parent().parent().parent().parent().removeClass("inactive")),jQuery(this).hasClass("panel-heading")&&(console.log("jQuery(this).hasClass('panel-heading')"),jQuery(this).parent().hasClass("inactive")&&(jQuery(this).parent().addClass("done"),jQuery(this).parent().removeClass("inactive")))}),jQuery(".btn.btn-info.show-next-panel").click(function(){var e=jQuery(this).attr("next-panel");console.log(e),jQuery(e).parent().addClass("done"),jQuery(e).parent().removeClass("inactive")});var shutter_type="Shutter";function addError(e,r){$("#"+e).prev().find(".select2-choice").length>0?($("#"+e).prev().addClass("error-field"),$("#"+e).prev().css("display","block"),$("#"+e).closest(".input-group-container").length>0?$('<span class="error-text">'+r+"</span>").insertAfter($("#"+e).closest(".input-group-container")):$('<span class="error-text">'+r+"</span>").insertAfter($("#"+e).after())):($("#"+e).addClass("error-field"),$("#"+e).closest(".input-group-container").length>0?$('<span class="error-text">'+r+"</span>").insertAfter($("#"+e).closest(".input-group-container")):$('<span class="error-text">'+r+"</span>").insertAfter($("#"+e)))}function resetErrors(){$(".error-field").removeClass("error-field"),$("span.error-text").remove()}function modalShowError(e){jQuery("#errorModal .btn-close").on("click",function(e){jQuery("#errorModal").hide()});$("#property_nowarranty").prop("checked");return $("#nowarranty").show(),jQuery("#errorModal").show(),jQuery("#errorModal.fade").css("opacity","1"),jQuery("#errorModal .modal-body").html("This shutter is outside of warranty. The following errors have occured: <br/>"+e+"<br/><br/>Either <strong>accept</strong> that there will be no warranty or <strong>change</strong> the configuration. "),!1}function modalShowErrorNoWarranty(e){jQuery("#errorModal .btn-close").on("click",function(e){jQuery("#errorModal").hide()});$("#property_nowarranty").prop("checked");return jQuery("#errorModal").show(),jQuery("#errorModal.fade").css("opacity","1"),jQuery("#errorModal .modal-body").html("The following errors have occured: <br/>"+e+"<br/>. "),!1}jQuery("#add-product-single-form .btn-success").on("click",function(e){e.preventDefault(),resetErrors(),jQuery(document).ajaxStart(function(){jQuery(".spinner").show()}),jQuery(document).ajaxComplete(function(){jQuery(".spinner").hide()}),jQuery("#property_layoutcode").val()&&jQuery("#property_layoutcode").val().toUpperCase();var r=jQuery("#property_material").val(),t=(jQuery("#property_width").val(),jQuery("#property_height").val()),o=jQuery("#property_midrailheight").val(),l=jQuery("#property_midrailheight2").val(),a=jQuery("#property_bladesize").val();console.log(a);var i=jQuery("#property_room_other").val(),s=jQuery("input[name=property_stile]:checked").val(),p=jQuery("input[name=property_solidtype]:checked").val(),d=jQuery("#property_hingecolour").val(),n=jQuery("#property_shuttercolour").val(),h=jQuery("#property_controltype").val(),_=jQuery("#property_midraidevider1").val(),y=jQuery("#property_midraidevider2").val(),c=0,u=0;if($("#property_nowarranty").prop("checked")){0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text)),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text)),0===d.length&&(u++,c++,$("#property_hingecolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_hingecolour","Please select hinge colour for shutter!"),error_text="Please select hinge colour",modalShowErrorNoWarranty(error_text)),0===n.length&&(u++,c++,$("#property_shuttercolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_shuttercolour","Please select shutter colour!"),error_text="Please select shutter colour",modalShowErrorNoWarranty(error_text)),0!==h.length||jQuery("#s2id_property_controltype").is(":hidden")||(u++,c++,$("#property_controltype").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_controltype","Please select control type!"),error_text="Please select controltype",modalShowErrorNoWarranty(error_text));S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(Q=1;Q<=C;Q++){k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}P=$("#property_layoutcode_tracked").val();if(0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0===u){G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter added to order!");var r=jQuery('input[name="edit_customer"]').val(),t=jQuery('input[name="order_edit"]').val();setTimeout(function(){0!==r.length&&0!==t.length?window.history.back():window.location.replace("/checkout")},500)})}}else{jQuery("select.required, input.required").each(function(e){""!==jQuery(this).val()&&null!==jQuery(this).val()||jQuery(this).is(":hidden")||(c++,addError(jQuery(this).attr("id"),"Please fill in this field"),modalShowError("Please fill in this field - "+jQuery(this).attr("id")))}),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text)),0!==i.length||jQuery("#s2id_property_room_other").is(":hidden")||(u++,c++,alert("No room name"),error_text="Room Name is empty",addError("property_room_other",error_text),modalShowErrorNoWarranty(error_text)),0!==s.length||jQuery("#s2id_property_stile").is(":hidden")||(c++,error_text="property stile is empty",addError("property_stile",error_text),modalShowError(error_text)),null==p&&"none"!=$("#solidtype").css("display")&&(c++,error_text="property stile type is empty",addError("solidtype",error_text),modalShowError(error_text)),0===d.length&&(c++,error_text="Property hingecolour is empty",addError("property_hingecolour",error_text),modalShowError(error_text)),0===n.length&&(c++,error_text="Property shuttercolour is empty",addError("property_shuttercolour",error_text),modalShowError(error_text)),0!==h.length||jQuery("#s2id_property_controltype").is(":hidden")||(c++,error_text="Property controltype is empty",addError("property_controltype",error_text),modalShowError(error_text)),""!==r&&null!==r||alert("material must be Selected");var m=parseFloat($("#property_height").val()),g=getStyleTitle(),x=$("#property_controltype").val(),v=parseFloat($("#property_controlsplitheight").val()),w=parseFloat($("#property_controlsplitheight2").val()),f=getPropertyMidrailheight();""==f&&(f=0),isNaN(v)&&(v=0);var b=getPropertyTotHeight(),E="";g.indexOf("Special")<-1&&(f>1800?(error_text="Midrail Height should be below 1800mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text)):f>t-300&&(error_text="Midrail Height should be below "+(t-300)+"mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text))),t>=1800&&t<=3e3&&-1==g.indexOf("Tier")&&0==f&&g.indexOf("Combi")<-1&&(""!==$("#property_midrailheight").val()&&0!==$("#property_midrailheight").val()||($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text))),t>=1800&&t<=3e3&&g.indexOf("Tracked")>=0&&0==f&&($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"137"==$("#property_material").val()&&parseFloat($("#property_height").val())<300&&(c++,error_text="Height should be at least 300mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"187"==$("#property_material").val()&&parseFloat($("#property_height").val())<400&&(c++,error_text="Height should be at least 400mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())<250&&(c++,error_text="Height should be at least 250mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text));var j=$("input#property_material").val();panel_height=137==j?1350:1500,max_height=2*panel_height,g.indexOf("Tier")>-1?m>panel_height&&0==b&&(c++,error_text="T-o-t height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_totheight",error_text),modalShowError(error_text)):g.indexOf("Solid")>-1?$("#property_midrailheight").removeClass("required"):g.indexOf("Combi")<-1&&m>panel_height&&0==f&&$("#property_midrailheight").hasClass("required")&&(c++,error_text="Midrail height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())>max_height&&(c++,error_text="Height should not exceed "+max_height.toString()+"mm. ",E+=error_text,0,addError("property_height",error_text),modalShowError(error_text)),f>0&&f>m-300&&(error_text="Midrail Height should not exceed height of "+(m-300)+"mm. ",c++,addError("property_midrailheight",error_text),modalShowError(error_text)),0==$("input[name=property_frametype]:checked").length&&(c++,$('<span class="error-text">Please select frame type</span>').insertBefore($("#choose-frametype")),error_text="Please select frame type",addError("property_frametype",error_text),modalShowError(error_text)),0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text));var S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val();0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&35==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_bypasstype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select By-pass Type</span>').insertBefore($("#bypasstype")),$("#bypasstype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select By-pass Type",addError("property_bypasstype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_lightblocks"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Light Blocks</span>').insertBefore($("#lightblocks")),$("#lightblocks").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Light Blocks",addError("property_lightblocks",error_text),modalShowErrorNoWarranty(error_text));var S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val(),T=0,M=0;S=S?S.toUpperCase():P.toUpperCase(),counter=0,last_char="",total_panels=0,all_panels=0,tracked_layout_error=!1;j=$("input#property_material").val();var O=$("input#property_bladesize").val();890,panel2_width=550,panel2_width=625,panel2_width=625,panel3_width=550,panel2_width=625,panel3_width=550,panel3_width=550;var C;187==j&&1500,139!=j&&138!=j||890,188!=j&&137!=j||850;var N={panels1:0,panels2:0,panels3:0,multiPanels:0},B="",H="";for(Q=0;Q<S.length;Q++)all_panels++,0===Q&&(B=S.charAt(Q)),H=S.charAt(Q),console.log("======================================"),console.log("currentCharacter "+H),console.log("lastCharacter "+B),g.indexOf("Tracked")>-1?(N.multiPanels=N.multiPanels+1,console.log("Total Panels finded Tracked : "+total_panels)):"L"!=S.charAt(Q)&&"R"!=S.charAt(Q)?(last_char=S.charAt(Q),console.log("Last Char "+last_char),console.log("Total Panels finded : "+total_panels),1===total_panels?N.panels1=N.panels1+total_panels:2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels),console.log("TOTAL PANELS BCTG "+total_panels),console.log(N),console.log("reset total"),total_panels=0,B=S.charAt(Q)):H!==B&&"BCTG".indexOf(B)<0?(console.log("Total Panels finded : "+total_panels),1===total_panels?1===Q?(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+2,total_panels=1):(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+1,total_panels=1):2===total_panels?(N.panels2=N.panels2+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):3===total_panels?(N.panels3=N.panels3+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):total_panels>3&&(N.multiPanels=N.multiPanels+total_panels,total_panels=1,N.panels1=N.panels1+total_panels),console.log("TOTAL PANELS RL "+total_panels),console.log(N),console.log("reset total"),B=S.charAt(Q)):(total_panels++,B=S.charAt(Q),Q+1===S.length&&(1===total_panels?N.panels1=N.panels1+total_panels:2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels)),console.log("TOTAL PANELS same "+total_panels),console.log(N)),multipanel_singlepanel_width=$("input#property_width").val()/total_panels;if(console.log(N),M=0,width_shutter=jQuery("#property_width").val(),C=$("#property_nr_sections").val()){width_shutter=0;for(Q=1;Q<=C;Q++)width_shutter+=parseFloat($("#property_width"+Q).val());console.log("width_shutter: "+width_shutter)}if(N.panels1>0){var L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M+=N.panels1*L}if(N.panels2>0){var F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels2*F}if(N.panels3>0){F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels3*F,console.log("arrayPanels.panels3 > 0")}if(N.multiPanels>0){L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M=N.panels1*L,g.indexOf("Tracked")>-1||(error_text="<br/>Layout code is invalid. No more than 3 consecutive "+last_char+" panels allowed.",c++,0,E+=error_text,addError("property_layoutcode",error_text),modalShowError(error_text))}if(-1==g.indexOf("Tracked")&&(N.panels1>0&&0===N.panels2&&0===N.panels3&&0===N.multiPanels&&(M<width_shutter&&(console.log("width shutter: "+width_shutter+" width panels max "+M),error_text="<br/>Max width for single panel too high. Max width "+L,c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1<200&&(error_text="<br/>Min width for single panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text))),(N.panels2>0||N.panels3>0&&0===N.multiPanels)&&(M<width_shutter&&(error_text="<br/>Max width for multiple panel too high.",c++,console.log("current_max_width: "+M),addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1+width_shutter/N.panels2+width_shutter/N.panels3<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)))),g.indexOf("Tracked")>-1){F=890;M=N.multiPanels*F,console.log("current_max_width: "+M),M<width_shutter&&(error_text="<br/>Max width for single panel too high.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.multiPanels<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),g.indexOf("Tracked")>-1&&N.multiPanels%2!=0&&(tracked_layout_error=!0),tracked_layout_error&&(c++,addError("property_layoutcode","Tracked shutters require even number of panels per layout code 22"),error_text="Tracked shutters require even number of panels per layout code",modalShowError(error_text))}T=200*all_panels,137==j&&(T=250*all_panels,g.indexOf("Tracked")),""!=width_shutter&&width_shutter<T&&(c++,error_text="Width should be at least "+T+"mm. ",E+=error_text,0,addError("property_width",error_text),modalShowError(error_text)),"Blackout"==shutter_type&&0==(S.match(/t/gi)||[]).length&&0==(S.match(/b/gi)||[]).length&&0==(S.match(/c/gi)||[]).length&&width_shutter>1400&&(c++,addError("property_layoutcode","Shutter and Blackout Blind require a T-post if width is more than 1400mm")),(S.indexOf("B")>0||S.indexOf("C")>0)&&-1==g.indexOf("Bay")&&-1==g.indexOf("Tracked")&&(c++,addError("property_layoutcode","Please choose Bay Window style with a layout code containing B or C."));O=$("input#property_bladesize").val();if("96"==x||"95"==x){var z,I=!1,A=!1,W=0,q=0,U=0,D=0;if("47"==O&&(z=890,f>0&&(z=890)),"63"==O&&(z=890,f>0&&(z=890)),"76"==O&&(z=890,f>0&&(z=890)),"89"==O&&(z=890,f>0&&(z=890)),"187"==j&&(z=1500),0==f&&0==b&&m>z)W=0,q=z,I=!0;else if(f>0||b>0){var R=0;f>0&&(R=parseInt(f)),b>0&&(R=parseInt(b));var J=m-R;R>z&&J>z?(I=!0,A=!0,W=0,q=R,U=R+1,D=m):(R>z||J>z)&&(I=!0,R>z?(W=0,q=R):(W=R+1,q=m))}if(f>0&&v>0)Math.abs(f-v)<=10&&(error_text="<br/>Distance between split height and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text));if(f>0&&parseInt(w)>0)Math.abs(f-parseInt(w))<=10&&(error_text="<br/>Distance between split height 2 and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text));I&&($("#property_controltype").select2("val",95),$("#control-split-height").show(),0==parseInt(v)&&(error_text="<br/>Split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v>q&&(error_text="<br/>Split height should be less than "+q+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v<W&&(error_text="<br/>Split height should be more than "+W+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text))),A?($("#property_controltype").select2("val",95),$("#control-split-height").show(),$("#property_controlsplitheight2").show(),0==parseInt(w)&&(error_text="<br/>Second split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w>D&&(error_text="<br/>Second split height should be less than "+D+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w<U&&(error_text="<br/>Second split height should be more than "+U+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text))):$("#property_controlsplitheight2").hide()}if($("input[name=property_style]:checked").length>0&&(g=$("input[name=property_style]:checked").data("title")).indexOf("Shaped")>-1&&(existingShapeFile=$("#provided-shape").html().trim(),newShapeFile=$("#attachment").val(),newDrawFile=$("#attachment_draw").val(),""==existingShapeFile&&""==newShapeFile&&""==newDrawFile&&(c++,addError("shape-upload-container",'Please provide the desired shape for style "Shaped & French Cut Out"'))),$("#canvas_container1 svg").length>0&&$("#shutter_svg").html($("#canvas_container1").html()),139==r||138==r||188==r?(o>1800&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1800")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):137==r?(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2400&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2400")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>2700&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 2700")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>2700&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 2700")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):187==r&&(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))),console.log("errors_no_warranty "+u),0===c&&0===u){var G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter added to order!");var r=jQuery('input[name="edit_customer"]').val(),t=jQuery('input[name="order_edit"]').val();setTimeout(function(){0!==r.length&&0!==t.length?window.history.back():window.location.replace("/checkout")},500)})}}}),jQuery("#add-product-single-form .update-btn").on("click",function(e){e.preventDefault(),resetErrors(),console.log("in update cusrom-script"),jQuery(document).ajaxStart(function(){jQuery(".spinner").show()}),jQuery(document).ajaxComplete(function(){jQuery(".spinner").hide()}),jQuery("#property_layoutcode").val()&&jQuery("#property_layoutcode").val().toUpperCase();var r=jQuery("#property_material").val(),t=(jQuery("#property_width").val(),jQuery("#property_height").val()),o=jQuery("#property_midrailheight").val(),l=jQuery("#property_midrailheight2").val(),a=jQuery("#property_bladesize").val();console.log(a);var i=jQuery("#property_room_other").val(),s=jQuery("input[name=property_stile]:checked").val(),p=jQuery("input[name=property_solidtype]:checked").val(),d=jQuery("#property_hingecolour").val(),n=jQuery("#property_shuttercolour").val(),h=jQuery("#property_controltype").val(),_=jQuery("#property_midraidevider1").val(),y=jQuery("#property_midraidevider2").val(),c=0,u=0;if($("#property_nowarranty").prop("checked")){0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text)),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text));S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(Q=1;Q<=C;Q++){k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}P=$("#property_layoutcode_tracked").val();if(0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0===d.length&&(u++,c++,$("#property_hingecolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_hingecolour","Please select hinge colour for shutter!"),error_text="Please select hinge colour",modalShowErrorNoWarranty(error_text)),0===n.length&&(u++,c++,$("#property_shuttercolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_shuttercolour","Please select shutter colour!"),error_text="Please select shutter colour",modalShowErrorNoWarranty(error_text)),0!==h.length||jQuery("#s2id_property_controltype").is(":hidden")||(u++,c++,$("#property_controltype").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_controltype","Please select control type!"),error_text="Please select controltype",modalShowErrorNoWarranty(error_text)),0===u){G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod-update.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter updated to order!");var r=jQuery('input[name="edit_customer"]').val(),t=jQuery('input[name="order_edit"]').val();setTimeout(function(){0!==r.length&&0!==t.length?window.history.back():window.location.replace("/checkout")},500)})}}else{jQuery("select.required, input.required").each(function(e){""!==jQuery(this).val()&&null!==jQuery(this).val()||jQuery(this).is(":hidden")||(c++,addError(jQuery(this).attr("id"),"Please fill in this field"),modalShowError("Please fill in this field - "+jQuery(this).attr("id")))}),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text)),0!==i.length||jQuery("#s2id_property_room_other").is(":hidden")||(u++,c++,alert("No room name"),error_text="Room Name is empty",addError("property_room_other",error_text),modalShowErrorNoWarranty(error_text)),0!==s.length||jQuery("#s2id_property_stile").is(":hidden")||(c++,error_text="property stile is empty",addError("property_stile",error_text),modalShowError(error_text)),null==p&&"none"!=$("#solidtype").css("display")&&(c++,error_text="property stile type is empty",addError("solidtype",error_text),modalShowError(error_text)),0===d.length&&(c++,error_text="Property hingecolour is empty",addError("property_hingecolour",error_text),modalShowError(error_text)),0===n.length&&(c++,error_text="Property shuttercolour is empty",addError("property_shuttercolour",error_text),modalShowError(error_text)),0===h.length&&!jQuery("#s2id_property_controltype").is(":hidden")&&jQuery("#s2id_property_controltype").hasClass("required")&&(c++,error_text="Property controltype is empty",addError("property_controltype",error_text),modalShowError(error_text)),""!==r&&null!==r||alert("material must be Selected");var m=parseFloat($("#property_height").val()),g=getStyleTitle(),x=$("#property_controltype").val(),v=parseFloat($("#property_controlsplitheight").val()),w=parseFloat($("#property_controlsplitheight2").val()),f=getPropertyMidrailheight();""==f&&(f=0),isNaN(v)&&(v=0);var b=getPropertyTotHeight(),E="";g.indexOf("Special")<-1&&(f>1800?(error_text="Midrail Height should be below 1800mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text)):f>t-300&&(error_text="Midrail Height should be below "+(t-300)+"mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text))),t>=1800&&t<=3e3&&-1==g.indexOf("Tier")&&0==f&&g.indexOf("Combi")<-1&&(""!==$("#property_midrailheight").val()&&0!==$("#property_midrailheight").val()||($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text))),t>=1800&&t<=3e3&&g.indexOf("Tracked")>=0&&0==f&&($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"137"==$("#property_material").val()&&parseFloat($("#property_height").val())<300&&(c++,error_text="Height should be at least 300mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"187"==$("#property_material").val()&&parseFloat($("#property_height").val())<400&&(c++,error_text="Height should be at least 400mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())<250&&(c++,error_text="Height should be at least 250mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text));var j=$("input#property_material").val();panel_height=137==j?1350:1500,max_height=2*panel_height,g.indexOf("Tier")>-1?m>panel_height&&0==b&&(c++,error_text="T-o-t height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_totheight",error_text),modalShowError(error_text)):g.indexOf("Solid")>-1?$("#property_midrailheight").removeClass("required"):g.indexOf("Combi")<-1&&m>panel_height&&0==f&&$("#property_midrailheight").hasClass("required")&&(c++,error_text="Midrail height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())>max_height&&(c++,error_text="Height should not exceed "+max_height.toString()+"mm. ",E+=error_text,0,addError("property_height",error_text),modalShowError(error_text)),f>0&&f>m-300&&(error_text="Midrail Height should not exceed height of shutter "+(m-300)+"mm. ",c++,addError("property_midrailheight",error_text),modalShowError(error_text)),0==$("input[name=property_frametype]:checked").length&&(c++,$('<span class="error-text">Please select frame type</span>').insertBefore($("#choose-frametype")),error_text="Please select frame type",addError("property_frametype",error_text),modalShowError(error_text)),0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text));var S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val();0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&35==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_bypasstype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select By-pass Type</span>').insertBefore($("#bypasstype")),$("#bypasstype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select By-pass Type",addError("property_bypasstype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_lightblocks"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Light Blocks</span>').insertBefore($("#lightblocks")),$("#lightblocks").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Light Blocks",addError("property_lightblocks",error_text),modalShowErrorNoWarranty(error_text));var S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val(),T=0,M=0;S=S?S.toUpperCase():P.toUpperCase(),counter=0,last_char="",total_panels=0,all_panels=0,tracked_layout_error=!1;j=$("input#property_material").val();var O=$("input#property_bladesize").val();890,panel2_width=550,panel2_width=625,panel2_width=625,panel3_width=550,panel2_width=625,panel3_width=550,panel3_width=550;var C;187==j&&1500,139!=j&&138!=j||890,188!=j&&137!=j||850;var N={panels1:0,panels2:0,panels3:0,multiPanels:0},B="",H="";for(Q=0;Q<S.length;Q++)all_panels++,0===Q&&(B=S.charAt(Q)),H=S.charAt(Q),console.log("======================================"),console.log("currentCharacter "+H),console.log("lastCharacter "+B),g.indexOf("Tracked")>-1?(N.multiPanels=N.multiPanels+1,console.log("Total Panels finded Tracked : "+total_panels)):"L"!=S.charAt(Q)&&"R"!=S.charAt(Q)?(last_char=S.charAt(Q),console.log("Last Char "+last_char),console.log("Total Panels finded : "+total_panels),1===total_panels?N.panels1=N.panels1+total_panels:2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels),console.log("TOTAL PANELS BCTG "+total_panels),console.log(N),console.log("reset total"),total_panels=0,B=S.charAt(Q)):H!==B&&"BCTG".indexOf(B)<0?(console.log("Total Panels finded : "+total_panels),1===total_panels?1===Q?(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+2,total_panels=1):(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+1,total_panels=1):2===total_panels?(N.panels2=N.panels2+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):3===total_panels?(N.panels3=N.panels3+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):total_panels>3&&(N.multiPanels=N.multiPanels+total_panels,total_panels=1,N.panels1=N.panels1+total_panels),console.log("TOTAL PANELS RL "+total_panels),console.log(N),console.log("reset total"),B=S.charAt(Q)):(total_panels++,console.log("TOTAL PANELS to add "+total_panels),B=S.charAt(Q),Q+1===S.length&&(1===total_panels?(console.log("add to array panel !!! "),console.log(total_panels),N.panels1=N.panels1+total_panels,console.log(N.panels1)):2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels)),console.log("TOTAL PANELS same "+total_panels),console.log(N)),multipanel_singlepanel_width=$("input#property_width").val()/total_panels;if(console.log(N),M=0,width_shutter=jQuery("#property_width").val(),C=$("#property_nr_sections").val()){width_shutter=0;for(Q=1;Q<=C;Q++)width_shutter+=parseFloat($("#property_width"+Q).val());console.log("width_shutter: "+width_shutter)}if(N.panels1>0){var L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M+=N.panels1*L}if(N.panels2>0){var F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels2*F}if(N.panels3>0){F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels3*F,console.log("arrayPanels.panels3 > 0")}if(N.multiPanels>0){console.log("arrayPanels.multiPanels > 0");L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M=N.panels1*L,g.indexOf("Tracked")>-1||(error_text="<br/>Layout code is invalid. No more than 3 consecutive "+last_char+" panels allowed.",c++,0,E+=error_text,addError("property_layoutcode",error_text),modalShowError(error_text))}if(-1==g.indexOf("Tracked")&&(N.panels1>0&&0===N.panels2&&0===N.panels3&&0===N.multiPanels&&(M<width_shutter&&(console.log("width shutter: "+width_shutter+" width panels max "+M),error_text="<br/>Max width for single panel too high. Max width "+L,c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1<200&&(error_text="<br/>Min width for single panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text))),(N.panels2>0||N.panels3>0&&0===N.multiPanels)&&(M<width_shutter&&(error_text="<br/>Max width for multiple panel too high.",c++,console.log("current_max_width: "+M),addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1+width_shutter/N.panels2+width_shutter/N.panels3<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)))),g.indexOf("Tracked")>-1){F=890;M=N.multiPanels*F,console.log("current_max_width: "+M),M<width_shutter&&(error_text="<br/>Max width for single panel too high.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.multiPanels<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),g.indexOf("Tracked")>-1&&N.multiPanels%2!=0&&(tracked_layout_error=!0),tracked_layout_error&&(c++,addError("property_layoutcode","Tracked shutters require even number of panels per layout code 22"),error_text="Tracked shutters require even number of panels per layout code",modalShowError(error_text))}T=200*all_panels,137==j&&(T=250*all_panels),""!=width_shutter&&width_shutter<T&&(c++,error_text="Width should be at least "+T+"mm. ",E+=error_text,0,addError("property_width",error_text),modalShowError(error_text)),"Blackout"==shutter_type&&0==(S.match(/t/gi)||[]).length&&0==(S.match(/b/gi)||[]).length&&0==(S.match(/c/gi)||[]).length&&width_shutter>1400&&(c++,addError("property_layoutcode","Shutter and Blackout Blind require a T-post if width is more than 1400mm")),(S.indexOf("B")>0||S.indexOf("C")>0)&&-1==g.indexOf("Bay")&&-1==g.indexOf("Tracked")&&(c++,addError("property_layoutcode","Please choose Bay Window style with a layout code containing B or C."),error_text="Please choose Bay Window style with a layout code containing B or C.",modalShowError(error_text));O=$("input#property_bladesize").val();if("96"==x||"95"==x){var z,I=!1,A=!1,W=0,q=0,U=0,D=0;if("47"==O&&(z=890,f>0&&(z=890)),"63"==O&&(z=890,f>0&&(z=890)),"76"==O&&(z=890,f>0&&(z=890)),"89"==O&&(z=890,f>0&&(z=890)),"187"==j&&(z=1500),0==f&&0==b&&m>z)W=0,q=z,I=!0;else if(f>0||b>0){var R=0;f>0&&(R=parseInt(f)),b>0&&(R=parseInt(b));var J=m-R;R>z&&J>z?(I=!0,A=!0,W=0,q=R,U=R+1,D=m):(R>z||J>z)&&(I=!0,R>z?(W=0,q=R):(W=R+1,q=m))}if(f>0&&v>0)Math.abs(f-v)<=10&&(error_text="<br/>Distance between split height and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text));if(f>0&&parseInt(w)>0)Math.abs(f-parseInt(w))<=10&&(error_text="<br/>Distance between split height 2 and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text));I&&($("#property_controltype").select2("val",95),$("#control-split-height").show(),0==parseInt(v)&&(error_text="<br/>Split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v>q&&(error_text="<br/>Split height should be less than "+q+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v<W&&(error_text="<br/>Split height should be more than "+W+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text))),A?($("#property_controltype").select2("val",95),$("#control-split-height").show(),$("#property_controlsplitheight2").show(),0==parseInt(w)&&(error_text="<br/>Second split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w>D&&(error_text="<br/>Second split height should be less than "+D+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w<U&&(error_text="<br/>Second split height should be more than "+U+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text))):$("#property_controlsplitheight2").hide()}if($("input[name=property_style]:checked").length>0&&(g=$("input[name=property_style]:checked").data("title")).indexOf("Shaped")>-1&&(existingShapeFile=$("#provided-shape").html().trim(),newShapeFile=$("#attachment").val(),newDrawFile=$("#attachment_draw").val(),""==existingShapeFile&&""==newShapeFile&&""==newDrawFile&&(c++,addError("shape-upload-container",'Please provide the desired shape for style "Shaped & French Cut Out"'))),$("#canvas_container1 svg").length>0&&$("#shutter_svg").html($("#canvas_container1").html()),139==r||138==r||188==r?(o>1800&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1800")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):137==r?(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2400&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2400")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>2700&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 2700")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>2700&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 2700")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):187==r&&(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))),console.log("errors_no_warranty "+u),0===c&&0===u){var G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod-update.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter updated to order!");var r=jQuery('input[name="edit_customer"]').val(),t=jQuery('input[name="order_edit"]').val();setTimeout(function(){0!==r.length&&0!==t.length?window.history.back():window.location.replace("/checkout")},500)})}}$.getJSON("/wp-content/plugins/shutter-module/ajax/shutter-values.php",function(){}).done(function(e){localStorage.setItem("prop_val",JSON.stringify(e));var r=JSON.stringify(e);return sessionStorage.prop_val=JSON.stringify(e),r});localStorage.getItem("prop_val")}),jQuery("#add-product-single-form .update-btn-admin").on("click",function(e){e.preventDefault(),resetErrors(),jQuery(document).ajaxStart(function(){jQuery(".spinner").show()}),jQuery(document).ajaxComplete(function(){jQuery(".spinner").hide()}),jQuery("#property_layoutcode").val()&&jQuery("#property_layoutcode").val().toUpperCase();var r=jQuery("#property_material").val(),t=(jQuery("#property_width").val(),jQuery("#property_height").val()),o=jQuery("#property_midrailheight").val(),l=jQuery("#property_midrailheight2").val(),a=jQuery("#property_bladesize").val();console.log(a);var i=jQuery("#property_room_other").val(),s=jQuery("input[name=property_stile]:checked").val(),p=jQuery("input[name=property_solidtype]:checked").val(),d=jQuery("#property_hingecolour").val(),n=jQuery("#property_shuttercolour").val(),h=jQuery("#property_controltype").val(),_=jQuery("#property_midraidevider1").val(),y=jQuery("#property_midraidevider2").val(),c=0,u=0;if($("#property_nowarranty").prop("checked")){0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text)),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text));S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(Q=1;Q<=C;Q++){k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}P=$("#property_layoutcode_tracked").val();if(0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0===d.length&&(u++,c++,$("#property_hingecolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_hingecolour","Please select hinge colour for shutter!"),error_text="Please select hinge colour",modalShowErrorNoWarranty(error_text)),0===n.length&&(u++,c++,$("#property_shuttercolour").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_shuttercolour","Please select shutter colour!"),error_text="Please select shutter colour",modalShowErrorNoWarranty(error_text)),0!==h.length||jQuery("#s2id_property_controltype").is(":hidden")||(u++,c++,$("#property_controltype").closest(".panel").find(".panel-collapse").collapse("show"),addError("property_controltype","Please select control type!"),error_text="Please select controltype",modalShowErrorNoWarranty(error_text)),0===u){G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod-update.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter updated to order!"),setTimeout(function(){window.history.back()},500)})}}else{jQuery("select.required, input.required").each(function(e){""!==jQuery(this).val()&&null!==jQuery(this).val()||jQuery(this).is(":hidden")||(c++,addError(jQuery(this).attr("id"),"Please fill in this field"),modalShowError("Please fill in this field - "+jQuery(this).attr("id")))}),g=$("input[name=property_style]:checked").data("title"),(0===a.length&&!jQuery("#s2id_property_bladesize").is(":hidden")||null===a||""===a&&-1==g.indexOf("Solid"))&&(c++,u++,$("#s2id_property_bladesize").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Louvre Size is empty",addError("property_bladesize",error_text),modalShowErrorNoWarranty(error_text)),0!==i.length||jQuery("#s2id_property_room_other").is(":hidden")||(u++,c++,alert("No room name"),error_text="Room Name is empty",addError("property_room_other",error_text),modalShowErrorNoWarranty(error_text)),0!==s.length||jQuery("#s2id_property_stile").is(":hidden")||(c++,error_text="property stile is empty",addError("property_stile",error_text),modalShowError(error_text)),null==p&&"none"!=$("#solidtype").css("display")&&(c++,error_text="property stile type is empty",addError("solidtype",error_text),modalShowError(error_text)),0===d.length&&(c++,error_text="Property hingecolour is empty",addError("property_hingecolour",error_text),modalShowError(error_text)),0===n.length&&(c++,error_text="Property shuttercolour is empty",addError("property_shuttercolour",error_text),modalShowError(error_text)),0!==h.length||jQuery("#s2id_property_controltype").is(":hidden")||(c++,error_text="Property controltype is empty",addError("property_controltype",error_text),modalShowError(error_text)),""!==r&&null!==r||alert("material must be Selected");var m=parseFloat($("#property_height").val()),g=getStyleTitle(),x=$("#property_controltype").val(),v=parseFloat($("#property_controlsplitheight").val()),w=parseFloat($("#property_controlsplitheight2").val()),f=getPropertyMidrailheight();""==f&&(f=0),isNaN(v)&&(v=0);var b=getPropertyTotHeight(),E="";g.indexOf("Special")<-1&&(f>1800?(error_text="Midrail Height should be below 1800mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text)):f>t-300&&(error_text="Midrail Height should be below "+(t-300)+"mm",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text))),t>=1800&&t<=3e3&&-1==g.indexOf("Tier")&&0==f&&g.indexOf("Combi")<-1&&(""!==$("#property_midrailheight").val()&&0!==$("#property_midrailheight").val()||($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text))),t>=1800&&t<=3e3&&g.indexOf("Tracked")>=0&&0==f&&($("#property_midrailheight").addClass("required"),error_text="Midrail Height should be completed",E=E+error_text+". ",0,c++,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"137"==$("#property_material").val()&&parseFloat($("#property_height").val())<300&&(c++,error_text="Height should be at least 300mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&"187"==$("#property_material").val()&&parseFloat($("#property_height").val())<400&&(c++,error_text="Height should be at least 400mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())<250&&(c++,error_text="Height should be at least 250mm",E=E+error_text+". ",0,addError("property_height",error_text),modalShowError(error_text));var j=$("input#property_material").val();panel_height=137==j?1350:1500,max_height=2*panel_height,g.indexOf("Tier")>-1?m>panel_height&&0==b&&(c++,error_text="T-o-t height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_totheight",error_text),modalShowError(error_text)):g.indexOf("Solid")>-1?$("#property_midrailheight").removeClass("required"):g.indexOf("Combi")<-1&&m>panel_height&&0==f&&$("#property_midrailheight").hasClass("required")&&(c++,error_text="Midrail height required for height more than "+panel_height.toString()+"mm. ",E+=error_text,0,addError("property_midrailheight",error_text),modalShowError(error_text)),""!=$("#property_height").val()&&parseFloat($("#property_height").val())>max_height&&(c++,error_text="Height should not exceed "+max_height.toString()+"mm. ",E+=error_text,0,addError("property_height",error_text),modalShowError(error_text)),f>0&&f>m-300&&(error_text="Midrail Height should not exceed height of shutter "+(m-300)+"mm. ",c++,addError("property_midrailheight",error_text),modalShowError(error_text)),0==$("input[name=property_frametype]:checked").length&&(c++,$('<span class="error-text">Please select frame type</span>').insertBefore($("#choose-frametype")),error_text="Please select frame type",addError("property_frametype",error_text),modalShowError(error_text)),0==$('input[name="property_style"]:checked').length&&(u++,c++,$("#choose-style").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please select a style for shutter!"),error_text="Please select Installation Style",modalShowErrorNoWarranty(error_text));var S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val();0==(S=S?S.toUpperCase():P.toUpperCase()).length&&(u++,c++,$("#property_layoutcode").closest(".panel").find(".panel-collapse").collapse("show"),addError("choose-style","Please complete with Layout Code!"),error_text="Please complete with Layout Code!",modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&35==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_trackedtype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Track Installation type</span>').insertBefore($("#trackedtype")),$("#trackedtype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Track Installation type",addError("property_trackedtype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_bypasstype"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select By-pass Type</span>').insertBefore($("#bypasstype")),$("#bypasstype").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select By-pass Type",addError("property_bypasstype",error_text),modalShowErrorNoWarranty(error_text)),0==$('input[name="property_lightblocks"]:checked').length&&37==$('input[name="property_style"]:checked').val()&&(u++,c++,$('<span class="error-text">Please select Light Blocks</span>').insertBefore($("#lightblocks")),$("#lightblocks").closest(".panel").find(".panel-collapse").collapse("show"),error_text="Please select Light Blocks",addError("property_lightblocks",error_text),modalShowErrorNoWarranty(error_text));var T=0,M=0,S=$("#property_layoutcode").val();if(C=$("#property_nr_sections").val()){S="";for(var Q=1;Q<=C;Q++){var k="B";C==Q&&(k=""),S=S+$("#property_layoutcode"+Q).val()+k}console.log("Individual layout_code: "+S)}var P=$("#property_layoutcode_tracked").val();S=S?S.toUpperCase():P.toUpperCase(),counter=0,last_char="",total_panels=0,all_panels=0,tracked_layout_error=!1;j=$("input#property_material").val();var O=$("input#property_bladesize").val();890,panel2_width=550,panel2_width=625,panel2_width=625,panel3_width=550,panel2_width=625,panel3_width=550,panel3_width=550;var C;187==j&&1500,139!=j&&138!=j||890,188!=j&&137!=j||850;var N={panels1:0,panels2:0,panels3:0,multiPanels:0},B="",H="";for(Q=0;Q<S.length;Q++)all_panels++,0===Q&&(B=S.charAt(Q)),H=S.charAt(Q),console.log("======================================"),console.log("currentCharacter "+H),console.log("lastCharacter "+B),g.indexOf("Tracked")>-1?(N.multiPanels=N.multiPanels+1,console.log("Total Panels finded Tracked : "+total_panels)):"L"!=S.charAt(Q)&&"R"!=S.charAt(Q)?(last_char=S.charAt(Q),console.log("Last Char "+last_char),console.log("Total Panels finded : "+total_panels),1===total_panels?N.panels1=N.panels1+total_panels:2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels),console.log("TOTAL PANELS BCTG "+total_panels),console.log(N),console.log("reset total"),total_panels=0,B=S.charAt(Q)):H!==B&&"BCTG".indexOf(B)<0?(console.log("Total Panels finded : "+total_panels),1===total_panels?1===Q?(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+2,total_panels=1):(console.log("add to array panel1 !!! "),console.log(N.panels1),N.panels1=N.panels1+1,total_panels=1):2===total_panels?(N.panels2=N.panels2+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):3===total_panels?(N.panels3=N.panels3+total_panels,total_panels=1,N.panels1=N.panels1+total_panels):total_panels>3&&(N.multiPanels=N.multiPanels+total_panels,total_panels=1,N.panels1=N.panels1+total_panels),console.log("TOTAL PANELS RL "+total_panels),console.log(N),console.log("reset total"),B=S.charAt(Q)):(total_panels++,console.log("TOTAL PANELS to add "+total_panels),B=S.charAt(Q),1===total_panels?(console.log("add to array panel !!! "),console.log(total_panels),N.panels1=N.panels1+total_panels,console.log(N.panels1)):2===total_panels?N.panels2=N.panels2+total_panels:3===total_panels?N.panels3=N.panels3+total_panels:total_panels>3&&(N.multiPanels=N.multiPanels+total_panels),console.log("TOTAL PANELS same "+total_panels),console.log(N)),multipanel_singlepanel_width=$("input#property_width").val()/total_panels;if(console.log(N),M=0,width_shutter=jQuery("#property_width").val(),C=$("#property_nr_sections").val()){width_shutter=0;for(Q=1;Q<=C;Q++)width_shutter+=parseFloat($("#property_width"+Q).val());console.log("width_shutter: "+width_shutter)}if(N.panels1>0){var L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M+=N.panels1*L}if(N.panels2>0){var F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels2*F}if(N.panels3>0){F=550;138!=j&&139!=j||(F=625),137==j&&(F=500),g.indexOf("Solid")>-1&&(F=550),M+=N.panels3*F,console.log("arrayPanels.panels3 > 0")}if(N.multiPanels>0){L=750;187==j&&(L=1500),139!=j&&138!=j||(L=890),188!=j&&137!=j||(L=850),g.indexOf("Solid")>-1&&(L=550),M=N.panels1*L,g.indexOf("Tracked")>-1||(error_text="<br/>Layout code is invalid. No more than 3 consecutive "+last_char+" panels allowed.",c++,0,E+=error_text,addError("property_layoutcode",error_text),modalShowError(error_text))}if(-1==g.indexOf("Tracked")&&(N.panels1>0&&0===N.panels2&&0===N.panels3&&0===N.multiPanels&&(M<width_shutter&&(console.log("width shutter: "+width_shutter+" width panels max "+M),error_text="<br/>Max width for single panel too high. Max width "+L,c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1<200&&(error_text="<br/>Min width for single panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text))),(N.panels2>0||N.panels3>0&&0===N.multiPanels)&&(M<width_shutter&&(error_text="<br/>Max width for multiple panel too high.",c++,console.log("current_max_width: "+M),addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.panels1+width_shutter/N.panels2+width_shutter/N.panels3<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)))),g.indexOf("Tracked")>-1){F=890;M=N.multiPanels*F,console.log("current_max_width: "+M),M<width_shutter&&(error_text="<br/>Max width for single panel too high.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),width_shutter/N.multiPanels<200&&(error_text="<br/>Min width for multiple panel too low.",c++,addError("property_layoutcode",error_text),modalShowError(error_text)),g.indexOf("Tracked")>-1&&N.multiPanels%2!=0&&(tracked_layout_error=!0),tracked_layout_error&&(c++,addError("property_layoutcode","Tracked shutters require even number of panels per layout code 22"),error_text="Tracked shutters require even number of panels per layout code",modalShowError(error_text))}T=200*all_panels,137==j&&(T=250*all_panels),""!=width_shutter&&width_shutter<=T&&(c++,error_text="Width should be at least "+T+"mm. ",E+=error_text,0,addError("property_width",error_text),modalShowError(error_text)),"Blackout"==shutter_type&&0==(S.match(/t/gi)||[]).length&&0==(S.match(/b/gi)||[]).length&&0==(S.match(/c/gi)||[]).length&&width_shutter>1400&&(c++,addError("property_layoutcode","Shutter and Blackout Blind require a T-post if width is more than 1400mm")),(S.indexOf("B")>0||S.indexOf("C")>0)&&-1==g.indexOf("Bay")&&-1==g.indexOf("Tracked")&&(c++,addError("property_layoutcode","Please choose Bay Window style with a layout code containing B or C."));O=$("input#property_bladesize").val();if("96"==x||"95"==x){var z,I=!1,A=!1,W=0,q=0,U=0,D=0;if("47"==O&&(z=890,f>0&&(z=890)),"63"==O&&(z=890,f>0&&(z=890)),"76"==O&&(z=890,f>0&&(z=890)),"89"==O&&(z=890,f>0&&(z=890)),"187"==j&&(z=1500),0==f&&0==b&&m>z)W=0,q=z,I=!0;else if(f>0||b>0){var R=0;f>0&&(R=parseInt(f)),b>0&&(R=parseInt(b));var J=m-R;R>z&&J>z?(I=!0,A=!0,W=0,q=R,U=R+1,D=m):(R>z||J>z)&&(I=!0,R>z?(W=0,q=R):(W=R+1,q=m))}if(f>0&&v>0)Math.abs(f-v)<=10&&(error_text="<br/>Distance between split height and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text));if(f>0&&parseInt(w)>0)Math.abs(f-parseInt(w))<=10&&(error_text="<br/>Distance between split height 2 and midrail should be more than 10mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text));I&&($("#property_controltype").select2("val",95),$("#control-split-height").show(),0==parseInt(v)&&(error_text="<br/>Split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v>q&&(error_text="<br/>Split height should be less than "+q+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text)),v<W&&(error_text="<br/>Split height should be more than "+W+"mm",c++,0,E+=error_text,addError("property_controlsplitheight",error_text))),A?($("#property_controltype").select2("val",95),$("#control-split-height").show(),$("#property_controlsplitheight2").show(),0==parseInt(w)&&(error_text="<br/>Second split height is required for "+O+"mm and height "+m+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w>D&&(error_text="<br/>Second split height should be less than "+D+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text)),w<U&&(error_text="<br/>Second split height should be more than "+U+"mm",c++,0,E+=error_text,addError("property_controlsplitheight2",error_text))):$("#property_controlsplitheight2").hide()}if($("input[name=property_style]:checked").length>0&&(g=$("input[name=property_style]:checked").data("title")).indexOf("Shaped")>-1&&(existingShapeFile=$("#provided-shape").html().trim(),newShapeFile=$("#attachment").val(),newDrawFile=$("#attachment_draw").val(),""==existingShapeFile&&""==newShapeFile&&""==newDrawFile&&(c++,addError("shape-upload-container",'Please provide the desired shape for style "Shaped & French Cut Out"'))),$("#canvas_container1 svg").length>0&&$("#shutter_svg").html($("#canvas_container1").html()),139==r||138==r||188==r?(o>1800&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1800")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):137==r?(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2400&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2400")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>2700&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 2700")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>2700&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 2700")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))):187==r&&(o>1500&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than 1500")),o>t-300&&jQuery("#property_midrailheight").is(":visible")&&(c++,modalShowError("Midrail Height should be less than "+t-300)),l>2700&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than 2700")),l>t-300&&jQuery("#property_midrailheight2").is(":visible")&&(c++,modalShowError("Midrail Height 2 should be less than "+t-300)),_>3e3&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than 3000")),_>t-300&&jQuery("#property_midraidevider1").is(":visible")&&(c++,modalShowError("Midrail divider1 should be less than "+t-300)),y>3e3&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than 3000")),y>t-300&&jQuery("#property_midraidevider2").is(":visible")&&(c++,modalShowError("Midrail divider2 should be less than "+t-300))),console.log("errors_no_warranty "+u),0===c&&0===u){var G=jQuery("#add-product-single-form").serialize(),K=jQuery("#canvas_container1").html();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-prod-update.php",data:{prod:G,svg:K}}).done(function(e){console.log(e),alert("Shutter updated to order!"),window.history.back()})}}$.getJSON("/wp-content/plugins/shutter-module/ajax/shutter-values.php",function(){}).done(function(e){localStorage.setItem("prop_val",JSON.stringify(e));var r=JSON.stringify(e);return sessionStorage.prop_val=JSON.stringify(e),r});localStorage.getItem("prop_val")}),jQuery("#add-product-single-form .btn.btn-primary.submit-batten").on("click",function(e){e.preventDefault(),resetErrors();var r=jQuery("#property_width").val(),t=jQuery("#property_height").val(),o=jQuery("#property_depth").val(),l=jQuery("#property_room_other").val(),a=jQuery("#property_material").val();if(console.log("id_material: "+a),console.log('parseFloat(jQuery("#property_height").val()) '+parseFloat(jQuery("#property_height").val())),console.log("id_material !== 188 || id_material !== 137 "+a!==188||137!==a),parseFloat(jQuery("#property_depth").val())<3&&(188==a||137==a))error_text="The minimum size of the batten can not be less than 3mm.",addError("property_depth",error_text),modalShowError(error_text);else if(parseFloat(jQuery("#property_height").val())<3&&(188==a||137==a))error_text="The minimum size of the batten can not be less than 3mm.",addError("property_height",error_text),modalShowError(error_text);else if(parseFloat(jQuery("#property_width").val())<3&&(188==a||137==a))error_text="The minimum size of the batten can not be less than 3mm.",addError("property_width",error_text),modalShowError(error_text);else if(parseFloat(jQuery("#property_height").val())<5&&(138==a||139==a||187==a))error_text="The minimum size of the batten can not be less than 5mm.",addError("property_height",error_text),modalShowError(error_text),console.log("property_height The minimum size of the batten can not be less than 5mm.");else if(parseFloat(jQuery("#property_width").val())<5&&(138==a||139==a||187==a))error_text="The minimum size of the batten can not be less than 5mm.",addError("property_width",error_text),modalShowError(error_text),console.log("property_width The minimum size of the batten can not be less than 5mm.");else if(parseFloat(jQuery("#property_depth").val())<5&&(138==a||139==a||187==a))error_text="The minimum size of the batten can not be less than 5mm.",addError("property_depth",error_text),modalShowError(error_text),console.log("property_depth The minimum size of the batten can not be less than 5mm.");else if(""===r||""===t||""===o||""===l)alert("Please compplete all the properties fields");else{var i=jQuery("#add-product-single-form").serialize();$.ajax({method:"POST",url:"/wp-content/plugins/shutter-module/ajax/ajax-batten.php",data:{prod:i}}).done(function(e){console.log(e),alert("Batten added!"),jQuery(".show-prod-info").html(e);var r=jQuery('input[name="edit_customer"]').val(),t=jQuery('input[name="order_edit"]').val();setTimeout(function(){0!==r.length&&0!==t.length?window.history.back():window.location.replace("/checkout")},500)})}}),jQuery(".print-drawing").click(function(){var e=window.open("","PRINT","height=700,width=800");return e.document.write("<html><head><title>"+document.title+"</title>"),e.document.write("</head><body >"),e.document.write("<h1>"+document.title+"</h1>"),e.document.write(document.getElementById("canvas_container1").innerHTML),e.document.write("</body></html>"),e.document.close(),e.focus(),e.print(),e.close(),!0}),jQuery(document).ready(function(){for(var e=0;e<6;e++){if(0!=jQuery("#property_t"+e).length){var r=jQuery("#t"+e).val();jQuery("#property_t"+e).val(r)}if(0!=jQuery("#property_b"+e).length){var t=jQuery("#b"+e).val();jQuery("#property_b"+e).val(t)}}jQuery("#property_layoutcode").val()&&jQuery("#property_layoutcode").val().toUpperCase(),setTimeout(function(){if(jQuery("#property_frametype").val()){var e=jQuery("#property_frametype").val();144==e?jQuery('input[value="144"]').attr("checked"):143==e&&jQuery('input[value="143"]').attr("checked")}},2e3)}),jQuery("#property_material").change(function(){var e=jQuery(this).val();187==e?(jQuery("#stile-img-earth").show(),jQuery("#stile-img-supreme").hide(),jQuery("#stile-img-biowood").hide(),jQuery("#stile-img-green").hide(),jQuery(".type-img-earth").show(),jQuery(".type-img-supreme").hide(),jQuery(".type-img-biowood").hide(),jQuery(".type-img-green").hide(),jQuery(".type-img-ecowood").hide()):139==e?(jQuery("#stile-img-supreme").show(),jQuery("#stile-img-earth").hide(),jQuery("#stile-img-ecowood").hide(),jQuery("#stile-img-biowood").hide(),jQuery("#stile-img-green").hide(),jQuery(".type-img-supreme").show(),jQuery(".type-img-earth").hide(),jQuery(".type-img-biowood").hide(),jQuery(".type-img-green").hide(),jQuery(".type-img-ecowood").hide()):138==e?(jQuery("#stile-img-biowood").show(),jQuery("#stile-img-supreme").hide(),jQuery("#stile-img-earth").hide(),jQuery("#stile-img-ecowood").hide(),jQuery("#stile-img-green").hide(),jQuery(".type-img-biowood").show(),jQuery(".type-img-supreme").hide(),jQuery(".type-img-earth").hide(),jQuery(".type-img-green").hide(),jQuery(".type-img-ecowood").hide()):137==e?(jQuery("#stile-img-green").show(),jQuery("#stile-img-supreme").hide(),jQuery("#stile-img-biowood").hide(),jQuery("#stile-img-earth").hide(),jQuery("#stile-img-ecowood").hide(),jQuery(".type-img-green").show(),jQuery(".type-img-supreme").hide(),jQuery(".type-img-biowood").hide(),jQuery(".type-img-earth").hide(),jQuery(".type-img-ecowood").hide()):188==e&&(jQuery("#stile-img-ecowood").show(),jQuery("#stile-img-supreme").hide(),jQuery("#stile-img-biowood").hide(),jQuery("#stile-img-earth").hide(),jQuery("#stile-img-green").hide(),jQuery(".type-img-ecowood").show(),jQuery(".type-img-green").hide(),jQuery(".type-img-supreme").hide(),jQuery(".type-img-biowood").hide(),jQuery(".type-img-earth").hide())}),jQuery(document).ready(function(){jQuery("#property_frametype").val();143==jQuery("#property_frametype").val()&&jQuery('input[name="property_frametype"][value="143"]').click(),144==jQuery("#property_frametype").val()&&jQuery('input[name="property_frametype"][value="144"]').click(),jQuery("select#buildout-select").change(function(){"flexible"===jQuery(this).val()?(jQuery('input[name="property_b_buildout1"]').prop("checked",!1),jQuery(".pull-left.extra-column-buildout.property_b_buildout1").hide()):jQuery(".pull-left.extra-column-buildout.property_b_buildout1").show()})});